# kubevirt-vm

![Version: 0.3.1](https://img.shields.io/badge/Version-0.3.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 0.1.0](https://img.shields.io/badge/AppVersion-0.1.0-informational?style=flat-square)

Configure a virtual machine for use with Kubevirt

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| cloudymax | <emax@cloudydev.net> | <https://github.com/cloudymax/> |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| cloudinit | object | `{"enabled":true,"secretName":"friend-scrapmetal-user-data"}` | enable or disable usage of cloud-init |
| diskErrorPolicy | string | `"report"` | controls hypervisor behavior when IO errors occur on disk read or write. Possible values are: 'report', 'ignore', 'enospace' |
| disks | list | `[{"bootorder":2,"bus":"virtio","name":"harddrive","nodePlacement":"scremlin","pvaccessMode":"ReadWriteOnce","pvcname":"debian12","pvcnamespace":"kubevirt","pvsize":"64G","pvstorageClassName":"raid","readonly":false,"source":"pvc","type":"disk"}]` | List of disks to create for the VM, Will be used to create Datavolumes or PVCs. |
| livenessProbe | object | `{"initialDelaySeconds":120,"periodSeconds":20,"tcpSocket":{"port":1500},"timeoutSeconds":10}` | set tieming and port number for liveness probe |
| readinessProbe | object | `{"failureThreshold":3,"httpGet":{"port":1500},"initialDelaySeconds":120,"periodSeconds":20,"successThreshold":3,"timeoutSeconds":10}` | set tieming and port number for readiness probe |
| service | list | `[{"externalTrafficPolicy":"Cluster","name":"service","ports":[{"name":"ssh","nodePort":30001,"port":22,"protocol":"TCP","targetPort":22},{"name":"status","nodePort":30001,"port":1500,"protocol":"TCP","targetPort":1500},{"name":"vnc","nodePort":30005,"port":5900,"protocol":"TCP","targetPort":5900}],"type":"NodePort"}]` | Service objects are used to expose the VM to the outside world. Just like int he cloud each VM starts off isolated and will need to be exposed via a LoadBalancer, NodePort, or ClusterIp service. |
| virtualMachine.features.acpiEnabled | bool | `true` |  |
| virtualMachine.features.autoattachGraphicsDevice | bool | `true` | Attach a basic graphics device for VNC access |
| virtualMachine.features.autoattachPodInterface | bool | `true` | Make pod network interface the default for the VM |
| virtualMachine.features.autoattachSerialConsole | bool | `true` | Attach a serial console device |
| virtualMachine.features.efiEnabled | bool | `true` | Enable EFI bios |
| virtualMachine.features.kvmEnabled | bool | `true` | Enable KVM acceleration |
| virtualMachine.features.secureBoot | bool | `false` | Enable Secure boot (Requires EFI) |
| virtualMachine.features.smmEnabled | bool | `true` |  |
| virtualMachine.gpus | list | `[]` | GPUs to pass to guest, requires that the GPUs are pre-configured in the kubevirt custom resource. |
| virtualMachine.machine.cpuPassthrough | bool | `true` | Pass all CPU features and capabilities to Guest |
| virtualMachine.machine.hyperThreadingEnabled | bool | `false` | Enable the use of Hyperthreading on Intel CPUs. Disable on AMD CPUs. |
| virtualMachine.machine.machineType | string | `"q35"` | QEMU virtual-machine type |
| virtualMachine.machine.memory | string | `"4Gi"` | Amount of RAM to pass to the Guest |
| virtualMachine.machine.pinCores | bool | `false` | Pin QEMU process to specific physical cores Requires `--cpu-manager-policy` enabled in kubelet |
| virtualMachine.machine.vCores | int | `4` | Number of Virtual cores to pass to the Guest |
| virtualMachine.name | string | `"scrapmetal"` | name of the virtualMachine or virtualMachinePool object |
| virtualMachine.namespace | string | `"default"` | namespace to deploy |
| virtualMachine.runStrategy | string | `"RerunOnFailure"` | One of 'Always' `RerunOnFailure` `Manual` `Halted` |
| virtualMachinePool.enabled | bool | `false` |  |
| virtualMachinePool.maxReplicas | int | `5` |  |
| virtualMachinePool.minReplicas | int | `1` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
